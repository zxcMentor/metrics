---
menu:
    after:
        name: binary_tree
        weight: 2
title: Построение сбалансированного бинарного дерева
---

# Задача построить сбалансированное бинарное дерево
Используя AVL дерево, постройте сбалансированное бинарное дерево, на текущей странице.

Нужно написать воркер, который стартует дерево с 5 элементов, и каждые 5 секунд добавляет новый элемент в дерево.

Каждые 5 секунд на странице появляется актуальная версия, сбалансированного дерева.

При вставке нового элемента, в дерево, нужно перестраивать дерево, чтобы оно оставалось сбалансированным.

Как только дерево достигнет 100 элементов, генерируется новое дерево с 5 элементами.
```go
package binary

import (
	"fmt"
	"math/rand"
	"time"
)

type Node struct {
	Key    int
	Height int
	Left   *Node
	Right  *Node
}

type AVLTree struct {
	Root *Node
}

func NewNode(key int) *Node {
	return &Node{Key: key, Height: 1}
}

func (t *AVLTree) Insert(key int) {
	t.Root = insert(t.Root, key)
}

func (t *AVLTree) ToMermaid() string {

}

func height(node *Node) int {

}

func max(a, b int) int {

}

func updateHeight(node *Node) {

}

func getBalance(node *Node) int {

}

func leftRotate(x *Node) *Node {

}

func rightRotate(y *Node) *Node {

}

func insert(node *Node, key int) *Node {

}

func GenerateTree(count int) *AVLTree {

}
```

Не обязательно использовать выше описанный код, можно использовать любую реализацию, выдающую сбалансированное бинарное дерево.

## Mermaid Chart

[MermaidJS](https://mermaid-js.github.io/) is library for generating svg charts and diagrams from text.

## Вывод:

{{< columns >}}
```tpl
{{</*/* mermaid [class="text-center"]*/*/>}}
graph TD
510-->282
282-->136
136-->65
65-->9
9-->3
3-->4
9-->20
20-->21
65-->97
97-->69
69-->96
97-->111
111-->122
136-->202
202-->177
177-->141
141-->171
177-->178
178-->196
202-->241
241-->203
203-->210
241-->277
277-->272
277-->279
282-->376
376-->350
350-->304
304-->284
284-->297
304-->325
325-->341
350-->362
362-->355
355-->359
362-->366
366-->371
376-->411
411-->403
403-->395
395-->399
403-->406
406-->408
411-->435
435-->418
418-->424
435-->455
455-->452
455-->483
510-->764
764-->620
620-->573
573-->562
562-->512
512-->533
562-->566
566-->569
573-->590
590-->579
579-->586
590-->606
606-->614
620-->655
655-->638
638-->621
621-->628
638-->641
641-->646
655-->706
706-->660
660-->676
706-->721
721-->717
721-->759
764-->908
908-->824
824-->801
801-->791
791-->799
801-->812
812-->822
824-->862
862-->840
840-->842
862-->871
871-->870
871-->878
908-->938
938-->930
930-->914
914-->925
930-->933
933-->935
938-->960
960-->943
943-->955
960-->966
966-->963
966-->988

{{/*/* /mermaid */*/}}
```
{{< /columns >}}

{{< mermaid >}}
graph TD
510-->282
282-->136
136-->65
65-->9
9-->3
3-->4
9-->20
20-->21
65-->97
97-->69
69-->96
97-->111
111-->122
136-->202
202-->177
177-->141
141-->171
177-->178
178-->196
202-->241
241-->203
203-->210
241-->277
277-->272
277-->279
282-->376
376-->350
350-->304
304-->284
284-->297
304-->325
325-->341
350-->362
362-->355
355-->359
362-->366
366-->371
376-->411
411-->403
403-->395
395-->399
403-->406
406-->408
411-->435
435-->418
418-->424
435-->455
455-->452
455-->483
510-->764
764-->620
620-->573
573-->562
562-->512
512-->533
562-->566
566-->569
573-->590
590-->579
579-->586
590-->606
606-->614
620-->655
655-->638
638-->621
621-->628
638-->641
641-->646
655-->706
706-->660
660-->676
706-->721
721-->717
721-->759
764-->908
908-->824
824-->801
801-->791
791-->799
801-->812
812-->822
824-->862
862-->840
840-->842
862-->871
871-->870
871-->878
908-->938
938-->930
930-->914
914-->925
930-->933
933-->935
938-->960
960-->943
943-->955
960-->966
966-->963
966-->988

{{< /mermaid >}}